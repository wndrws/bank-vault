@startuml
scale 1.5
left to right direction
skinparam monochrome true

actor Клиент as aClient
actor "Оператор\nхранилища" as aOperator
actor Менеджер as aManager

usecase "Заявка на\nполучение ячейки" as (apply)
usecase "Положить ценность\nв ячейку" as (putPrecious)
usecase "Изъять ценность\nиз ячейки" as (getPrecious)
usecase "Манипуляция\nс ячейкой" as (manipCell)
usecase "Манипуляция\nс ценностью" as (manipPrecious)
usecase "Проверка наличия\nсвободных ячеек\nподходящего размера" as (cellsCheck)
usecase "Внесение\nв базу клиентов" as (registerClient)
usecase "Проверка\nпаспортных данных" as (passportCheck)
usecase "Проверка\nкредитной истории" as (historyCheck)
usecase "Выбор\nразмера ячейки" as (chooseCell)
usecase "Оплата\nаренды ячейки" as (payForCell)
usecase "Оплата наличными" as (payWithCash)
usecase "Оплата картой" as (payWithCard)
usecase "Сделать скидку" as (discount)
usecase "Идентификация\nклиента" as (identifyClient)
usecase "Уведомление\nменеджера" as (notifyManager)
usecase "Проверка соответствия\nразмеров" as (sizeCheck)
usecase "Изъять" as (get)
usecase "Положить" as (put)
usecase "Открыть" as (open)
usecase "Закрыть" as (close)

aClient -- (apply)
aClient -- (putPrecious)
aClient -- (getPrecious)

(apply) ..> (passportCheck) : <<include>>
(apply) ..> (historyCheck) : <<include>>
(historyCheck) <.. (discount) : <<extend>>
(apply) ..> (chooseCell) : <<include>>
(apply) ..> (payForCell) : <<include>>
(payForCell) <|-- (payWithCash)
(payForCell) <|-- (payWithCard)
note bottom of (discount) : Если кредитная история хорошая

(putPrecious) ..> (identifyClient) : <<include>>
(putPrecious) ..> (notifyManager) : <<include>>
(putPrecious) ..> (manipPrecious) : <<include>>
(manipPrecious) <|-- (get)
(manipPrecious) <|-- (put)
(put) .> (sizeCheck) : <<include>>

(getPrecious) ..> (identifyClient) : <<include>>
(getPrecious) ..> (notifyManager) : <<include>>
(getPrecious) ..> (manipPrecious) : <<include>>

aOperator -- (putPrecious)
aOperator -- (getPrecious)
aOperator - (manipCell)
(manipCell) <|-d- (open)
(manipCell) <|-d- (close)

aManager --- (apply)
aManager --- (putPrecious)
aManager --- (getPrecious)
(registerClient) - aManager
aManager - (cellsCheck)

@enduml